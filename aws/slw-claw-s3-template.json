{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "  ",
  "Parameters": {
    "BucketName": {
      "Type": "String",
      "Default": "slw-claw-bucket"
    },
    "AccountId": {
      "Type": "String",
      "Default": "590476131038"
    }
  },
  "Resources": {
    "S3Bucket": {
      "Type": "AWS::S3::Bucket",
      "Properties": {
        "AccessControl": "PublicRead",
        "BucketName": {
          "Ref": "BucketName"
        },
        "Tags": [
          {
            "Key": "crew",
            "Value": "CLAW"
          }
        ],
        "WebsiteConfiguration": {
          "IndexDocument": "index.html",
          "ErrorDocument": "index.html"
        }

    },
    "DeletionPolicy": "Retain"
  },
  "S3BucketPolicy" : {
    "Type" : "AWS::S3::BucketPolicy",
    "Properties" : {
      "Bucket" : {"Ref" : "S3Bucket"},
      "PolicyDocument": {
        "Statement": [
          {
            "Sid":"AddPerm",
            "Effect":"Allow",
            "Principal": "*",
            "Action":["s3:GetObject"],
            "Resource": {
              "Fn::Join" : ["", ["arn:aws:s3:::", { "Ref" : "BucketName" } , "/*" ]]
            },
            "Condition": {
              "IpAddress": {
                "aws:SourceIp":
                  [
                    "210.10.223.250/32",
                    "203.34.100.2/32",
                    "49.255.213.144/28",
                    "210.10.244.96/28",
                    "62.219.135.48",
                    "184.59.133.179",
                    "27.33.58.60/30",
                    "14.200.59.197",
                    "203.219.46.60",
                    "14.200.152.208"
                  ]
              }
            }
          }
        ]
      }
    }
  }
}
}
